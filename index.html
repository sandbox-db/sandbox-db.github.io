<!DOCTYPE html>
<html lang="en">
   <head>
       <link rel="stylesheet" href="leaflet/leaflet.css"/>
        <!-- Make sure you put this AFTER Leaflet's CSS -->
       <script src="leaflet/leaflet.js"></script>
       <!-- Trying out fullscale on mobile device-->
       <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

   </head>
   <body>
       Updated 2021/07/09 16:15 EST
       <div id="map">
       </div>
       <script>
	     var brewery = L.icon({
               iconUrl: 'leaflet/images/brewery.png', //make sure this is the correct path
               iconSize:     [38, 45], // size of the icon
               iconAnchor:   [19, 1], // point of the icon which will correspond to marker's location
               popupAnchor:  [0, 0] // point from which the popup should open relative to the iconAnchor
            });
         var distillery = L.icon({
               iconUrl: 'leaflet/images/whiskey_still.png', //make sure this is the correct path
               iconSize:     [38, 45], // size of the icon
               iconAnchor:   [19, 1], // point of the icon which will correspond to marker's location
               popupAnchor:  [0, 0] //point from which the popup should open relative to the iconAnchor
          });

         var mbAttr = 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, ' +
		              'Imagery &copy; <a href="https://www.mapbox.com/">Mapbox</a>',
		     mbUrl = 'https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw';

	     var grayscale   = L.tileLayer(mbUrl, {id: 'mapbox/light-v9', tileSize: 512, zoomOffset: -1, attribution: mbAttr}),
		     streets  = L.tileLayer(mbUrl, {id: 'mapbox/streets-v11', tileSize: 512, zoomOffset: -1, attribution: mbAttr});
         
         var baseMaps = {
               "Grayscale": grayscale,
               "Streets": streets
         };
         
         //https://github.com/Leaflet/Leaflet/issues/7331#issuecomment-742454380
         //https://gis.stackexchange.com/a/271616
         
	     var mymap = L.map('map',{tap: false}).setView([44.606636773474854, -72.26347660710185], 10); //larger number more zoom
	     
	     
	     //Add breweries 
	     var Hill = L.marker([44.60663, -72.26347],{icon: brewery}).bindPopup("<b>Hill Farmstead Brewery</b>");
	     var Alchemist = L.marker([44.47742867998274, -72.71614119282586],{icon: brewery}).bindPopup("<b>The Alchemist Stowe</b>");
	     var Treehouse = L.marker([42.13681394517929, -72.0124116036083],{icon: brewery}).bindPopup("<a href='https://treehousebrew.com'>Tree House Brewing Company</a>");
	     var Maine = L.marker([43.83967505759322, -70.12118027288436],{icon: brewery}).bindPopup("<b>Maine Beer Company</b>");

	     
	     //Add distilleries
	     var Smuggler = L.marker([44.64749800557561, -72.83109698635812],{icon: distillery});   
	     Smuggler.bindPopup("<b>Smuggler's Notch Distillery</b><br>");
	     
	     
	     //Add lodging
	     //Add labels or popups in html format
         let isClicked = false
           
         Hill.on({
             mouseover: function() {
                 if(!isClicked) {
                     this.openPopup()
                 }
             },
             mouseout: function() { 
                 if(!isClicked) {
                     this.closePopup()
                 }
             },
             click: function() {
                 isClicked = true
                 this.openPopup()
             }
         })
           
         mymap.on ({
             click: function() {
                 isClicked = false
             },
             popupclose: function () {
                 isClicked = false
             }
         })
         //END of labels and popups
         
         var breweries = L.layerGroup([Hill, Alchemist,Treehouse,Maine]);
         var stills = L.layerGroup([Smuggler])
         
         var overlayMaps = {
               "Breweries": breweries,
               "Distilleries": stills
           };
	     
	     L.tileLayer(mbUrl, //'https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
		       {maxZoom: 18,
		       attribution: mbAttr,
		       id: 'mapbox/light-v9',
		       tileSize: 512,
		       zoomOffset: -1
	      }).addTo(mymap);

	      
	     

         L.control.layers(baseMaps, overlayMaps).addTo(mymap);
         L.control.scale().addTo(mymap); //adding scale to map    
       </script>
   </body>
</html>